{"version":3,"sources":["webpack:///./demo/index.js","webpack:///./demo/AnimateContainer.js","webpack:///./src/WebDesignDndProvider.js","webpack:///./src/Model/index.js","webpack:///./src/DropContainer/index.js","webpack:///./src/DropContainer/DropContainer.js","webpack:///./src/DropContainer/DropItem.js","webpack:///./src/WidgetItem/index.js","webpack:///./demo/DropContainerDemo.js","webpack:///./demo/DropContainerWithChildDemo.js","webpack:///./demo/widgets/index.js","webpack:///./demo/widgets/TextField/index.js","webpack:///./demo/widgets/TextareaField/index.js","webpack:///./demo/widgets/SelectField/index.js","webpack:///./demo/widgets/CheckboxField/index.js","webpack:///./demo/widgets/RadioField/index.js","webpack:///./src/index.js","webpack:///./src/ModelContext.js","webpack:///./src/constants.js"],"names":["_react","_interopRequireDefault","__webpack_require__","_reactDom","_AnimateContainer","_DropContainerDemo","_DropContainerWithChildDemo","_src","_widgets","idx","ReactDOM","render","default","createElement","_React$useState","React","useState","items","_React$useState2","_slicedToArray2","metadata","onMetadataChange","WebDesignDndProvider","value","onChange","onDragStart","ev","console","log","onDragEnd","onDrop","style","display","position","top","left","right","bottom","width","flex","widgets","map","widget","WidgetItem","key","xtype","getInstance","_objectSpread2","id","Math","random","toString","slice","pid","index","height","lineHeight","padding","title","canDrop","item","document","getElementById","DropContainer","_ref","monitor","list","_toConsumableArray2","sort","a","b","border","pos","i","length","getPositionIndex","DropItem","_ref2","isDragging","isOver","isHover","isTmp","transition","transform","concat","zIndex","opacity","background","_reactDndHtml5Backend","_reactDnd","_Model","model","_this","this","_this$props","props","children","_objectWithoutProperties2","DndProvider","backend","HTML5Backend","_extends2","ref","saveModel","Component","_propTypes","_ModelContext","_find","_findIndex","randomStr","arguments","undefined","normalizeItem","idField","pidField","WebDesignModel","createContext","isRootContainer","scope","setState","state","eventName","handler","getAllItems","filter","_this$props2","pids","node","getItem","pNode","currentFieldId","push","getItemIndex","s1","s2","_this$props3","indexField","__tmp__","__dragging__","addItem","_this2","ret","shouldRemove","getPids","indexOf","bItem","_this$props4","_idx","prevItem","oIdx","splice","_this$props5","nextItem","newItems","_this$props6","pidIndex","childs","getChildren","firstItem","lastItem","insertAfter","insertBefore","DropContainerContext","isSameItem","bind","getScope","fireEvent","addTmpItem","updateItem","getItems","removeItem","clearTmpItems","commitItem","isTmpItem","updateItemPid","setItemDragging","Provider","getModel","forEach","propTypes","array","func","_DropContainer","_DropItem","_withComponentHooks","_invariant","_constants","disabled","dom","findDOMNode","_connectDropTarget","connectDrop","_this$props$pid","hover","drop","collect","designer","useContext","ModelContext","_useDrop","useDrop","accept","target","shallow","_ref3","action","ACTION_ADD","ACTION_SORT","ext","isStrictlyOver","_useDrop2","collectedProps","connectDropTarget","child","Children","only","any","bool","self","dragItem","canDropRet","dragOffset","getClientOffset","targetOffset","getBoundingClientRect","middleY","y","canDrag","beginDrag","endDrag","type","begin","end","disableDrag","disableDrop","_connectDragTarget","connectDropAndDrag","getDropOptions","collectedDropProps","_useDrag","useDrag","getDragOptions","_useDrag2","collectedDragProps","connectDragTarget","object","isRequired","_connectDragSource","connectDrag","collectProps","connectDragSource","_ref$pid","margin","_ref4","overflow","_ref5","_TextField","_TextareaField","_SelectField","_CheckboxField","_RadioField","TextField","TextareaField","SelectField","CheckboxField","RadioField","_WebDesignDndProvider","_WidgetItem"],"mappings":"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","file":"js/index.cf4e29fe.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport AnimateContainer from \"./AnimateContainer\";\r\n\r\nimport DropContainerDemo from \"./DropContainerDemo\";\r\nimport DropContainerWithChildDemo from \"./DropContainerWithChildDemo\";\r\n\r\nimport { WebDesignDndProvider, WidgetItem } from \"../src\";\r\n\r\nimport widgets from \"./widgets\";\r\n\r\nfunction randomStr() {\r\n    return Math.random()\r\n        .toString(16)\r\n        .slice(2, 8);\r\n}\r\n\r\nlet idx = 1;\r\n\r\nfunction App() {\r\n    const [metadata, onMetadataChange] = React.useState({\r\n        items: []\r\n    });\r\n\r\n    function onChange(items) {\r\n        onMetadataChange({\r\n            items\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <WebDesignDndProvider\r\n                // 受控\r\n                value={metadata.items}\r\n                onChange={onChange}\r\n                onDragStart={ev => {\r\n                    console.log(\"onDragStart\", ev);\r\n                }}\r\n                onDragEnd={ev => {\r\n                    console.log(\"onDragEnd\", ev);\r\n                }}\r\n                onDrop={ev => {\r\n                    console.log(\"onDrop\", ev);\r\n                }}>\r\n                <div\r\n                    style={{\r\n                        display: \"flex\",\r\n                        position: \"fixed\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0\r\n                    }}>\r\n                    <div\r\n                        style={{\r\n                            width: 240,\r\n                            flex: \"none\"\r\n                        }}>\r\n                        {widgets.map(widget => {\r\n                            return (\r\n                                <WidgetItem\r\n                                    key={widget.xtype}\r\n                                    // disabled={widget.xtype === \"EX_URL_FIELD\"}\r\n                                    getInstance={() => ({\r\n                                        ...widget,\r\n                                        id: randomStr(),\r\n                                        pid: null,\r\n                                        index: idx++\r\n                                    })}>\r\n                                    <div\r\n                                        style={{\r\n                                            height: 32,\r\n                                            lineHeight: `32px`,\r\n                                            padding: \"0 20px\"\r\n                                        }}>\r\n                                        {widget.title}\r\n                                    </div>\r\n                                </WidgetItem>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                    <DropContainerDemo title=\"A\" />\r\n                    <DropContainerDemo pid=\"b\" title=\"B\" />\r\n                    <AnimateContainer />\r\n\r\n                    <DropContainerWithChildDemo title=\"Parent\" />\r\n                    <DropContainerDemo\r\n                        pid=\"d\"\r\n                        title=\"D\"\r\n                        canDrop={item => {\r\n                            return item.xtype === \"EX_TEXTAREA_FIELD\";\r\n                        }}\r\n                    />\r\n                </div>\r\n            </WebDesignDndProvider>\r\n        </div>\r\n    );\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","import React from \"react\";\r\nimport { DropContainer, DropItem } from \"../src\";\r\n\r\nexport default function AnimateContainer() {\r\n    return (\r\n        <DropContainer pid=\"Animate\">\r\n            {(items, { monitor, canDrop }) => {\r\n                const list = [...items];\r\n                list.sort((a, b) => a.index - b.index);\r\n\r\n                function getPositionIndex(index) {\r\n                    for (let i = 0; i < items.length; i++) {\r\n                        const item = items[i];\r\n                        if (item.index === index) return i;\r\n                    }\r\n                }\r\n\r\n                return (\r\n                    <div\r\n                        style={{\r\n                            position: \"relative\",\r\n                            border: canDrop\r\n                                ? \"1px solid green\"\r\n                                : \"1px solid #ccc\",\r\n                            flex: 1\r\n                        }}>\r\n                        <h3>Animate</h3>\r\n                        <hr />\r\n                        <div\r\n                            style={{\r\n                                position: \"relative\"\r\n                            }}>\r\n                            <div\r\n                                style={{\r\n                                    position: \"relative\"\r\n                                }}>\r\n                                {list.map((item, index) => {\r\n                                    var pos = getPositionIndex(item.index);\r\n\r\n                                    return (\r\n                                        <DropItem key={item.id} item={item}>\r\n                                            {({\r\n                                                isDragging,\r\n                                                isHover,\r\n                                                isOver,\r\n                                                isTmp\r\n                                            }) => {\r\n                                                return (\r\n                                                    <div\r\n                                                        key={item.id}\r\n                                                        id={item.id}\r\n                                                        style={{\r\n                                                            transition:\r\n                                                                \"transform .2s cubic-bezier(0.2, 0, 0, 1)\",\r\n                                                            position:\r\n                                                                \"absolute\",\r\n                                                            left: 5,\r\n                                                            right: 5,\r\n                                                            transform: `translate(0, ${(30 +\r\n                                                                18) *\r\n                                                                pos}px)`,\r\n                                                            zIndex: isDragging\r\n                                                                ? 2\r\n                                                                : 1,\r\n                                                            opacity: isDragging\r\n                                                                ? 0.5\r\n                                                                : 1,\r\n                                                            padding: 10,\r\n                                                            background:\r\n                                                                \"#f2f2f2\",\r\n                                                            border:\r\n                                                                isOver &&\r\n                                                                !isDragging\r\n                                                                    ? \"1px solid green\"\r\n                                                                    : \"1px solid #dadada\"\r\n                                                        }}>\r\n                                                        {item.title}({item.id})\r\n                                                    </div>\r\n                                                );\r\n                                            }}\r\n                                        </DropItem>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }}\r\n        </DropContainer>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\nimport { DndProvider } from \"react-dnd\";\r\n\r\nimport Model from \"./Model\";\r\n\r\nexport default class WebDesignDndProvider extends React.Component {\r\n    model = null;\r\n\r\n    getModel() {\r\n        return this.model;\r\n    }\r\n\r\n    saveModel = model => {\r\n        this.model = model;\r\n    };\r\n\r\n    render() {\r\n        const { children, ...props } = this.props;\r\n\r\n        return (\r\n            <DndProvider backend={HTML5Backend}>\r\n                <Model {...props} ref={this.saveModel}>\r\n                    {children}\r\n                </Model>\r\n            </DndProvider>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport propTypes from \"prop-types\";\r\nimport ModelContext from \"../ModelContext\";\r\n\r\nimport find from \"lodash/find\";\r\nimport findIndex from \"lodash/findIndex\";\r\n\r\nfunction randomStr(prefix = \"\") {\r\n    return (\r\n        prefix +\r\n        Math.random()\r\n            .toString(16)\r\n            .slice(2, 8)\r\n    );\r\n}\r\n\r\nfunction normalizeItem(item, props) {\r\n    const idField = props.idField;\r\n    const pidField = props.pidField;\r\n\r\n    item[idField] =\r\n        item[idField] === undefined ? randomStr(`item_`) : item[idField];\r\n\r\n    item[pidField] = item[pidField] === undefined ? null : item[pidField];\r\n\r\n    return item;\r\n}\r\n\r\nexport default class WebDesignModel extends React.Component {\r\n    static propTypes = {\r\n        value: propTypes.array,\r\n        onChange: propTypes.func,\r\n        onDragStart: propTypes.func,\r\n        onDragEnd: propTypes.func,\r\n        onDrop: propTypes.func\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.value) {\r\n            props.value.forEach(item => normalizeItem(item, props));\r\n        }\r\n        return {\r\n            items: \"value\" in props ? props.value : state.items\r\n        };\r\n    }\r\n\r\n    static defaultProps = {\r\n        idField: \"id\",\r\n        pidField: \"pid\",\r\n        indexField: \"index\",\r\n        onChange: null\r\n    };\r\n\r\n    DropContainerContext = React.createContext({\r\n        isRootContainer: true,\r\n        canDrop: null\r\n    });\r\n\r\n    state = {\r\n        scope: randomStr(\"scope_\"),\r\n        items: []\r\n    };\r\n\r\n    onChange(items) {\r\n        const props = this.props;\r\n        const { onChange } = props;\r\n\r\n        if (!(\"value\" in props)) {\r\n            this.setState({\r\n                items\r\n            });\r\n        }\r\n\r\n        if (onChange) {\r\n            onChange(items);\r\n        }\r\n    }\r\n\r\n    getScope() {\r\n        return this.state.scope;\r\n    }\r\n\r\n    fireEvent(eventName, ev) {\r\n        const { onDragStart, onDragEnd, onDrop } = this.props;\r\n\r\n        const events = {\r\n            onDragStart,\r\n            onDragEnd,\r\n            onDrop\r\n        };\r\n\r\n        const handler = events[eventName];\r\n\r\n        if (handler) {\r\n            handler(ev);\r\n        }\r\n    }\r\n\r\n    getItems(pid = null) {\r\n        const { pidField } = this.props;\r\n        const items = this.getAllItems();\r\n\r\n        return items.filter(item => item && item[pidField] == pid);\r\n    }\r\n\r\n    getChildren(id = null, items = this.state.items) {\r\n        const { pidField } = this.props;\r\n        return items.filter(item => item[pidField] == id);\r\n    }\r\n\r\n    getAllItems() {\r\n        return [...this.state.items];\r\n    }\r\n\r\n    //获取组件的所有父级ID\r\n    getPids(id) {\r\n        const { idField, pidField } = this.props;\r\n        const pids = [];\r\n        let node = this.getItem(id);\r\n\r\n        if (!node) return pids;\r\n\r\n        if (!node[pidField]) return pids;\r\n\r\n        let currentFieldId = node[pidField];\r\n        let pNode;\r\n        while ((pNode = this.getItem(currentFieldId))) {\r\n            pids.push(pNode[idField]);\r\n            currentFieldId = pNode[pidField];\r\n            if (!currentFieldId) break;\r\n        }\r\n\r\n        return pids;\r\n    }\r\n\r\n    updateItem(item) {\r\n        const { idField } = this.props;\r\n        const items = this.getAllItems();\r\n        const id = item[idField];\r\n        const idx = this.getItemIndex(id);\r\n\r\n        if (idx !== -1) {\r\n            items[idx] = item;\r\n        }\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    isSameItem(s1, s2) {\r\n        const { idField } = this.props;\r\n\r\n        return s1[idField] === s2[idField];\r\n    }\r\n\r\n    addItem(item, pid = null) {\r\n        const { pidField, indexField } = this.props;\r\n        item = normalizeItem(item, this.props);\r\n\r\n        const items = this.getAllItems();\r\n\r\n        item[pidField] = pid;\r\n\r\n        items.push(item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    addTmpItem(item, pid) {\r\n        item.__tmp__ = true;\r\n        item.__dragging__ = true;\r\n        this.addItem(item, pid);\r\n    }\r\n\r\n    setItemDragging(item) {\r\n        item.__dragging__ = true;\r\n\r\n        this.onChange(this.getAllItems());\r\n    }\r\n\r\n    removeItem(id) {\r\n        const { idField } = this.props;\r\n        const items = this.getAllItems();\r\n        //移除指定项目及子项目\r\n        const ret = items.filter(item => {\r\n            let shouldRemove = item[idField] === id;\r\n\r\n            if (!shouldRemove) {\r\n                const pids = this.getPids(item[idField]);\r\n                shouldRemove = pids.indexOf(id) > -1;\r\n            }\r\n\r\n            return !shouldRemove;\r\n        });\r\n\r\n        this.onChange(ret);\r\n    }\r\n\r\n    getItemIndex(id, items) {\r\n        const { idField } = this.props;\r\n        items = items || this.getAllItems();\r\n        return findIndex(items, item => item[idField] === id);\r\n    }\r\n\r\n    getItem(id) {\r\n        const { idField } = this.props;\r\n        const items = this.getAllItems();\r\n        return find(items, item => item && item[idField] === id);\r\n    }\r\n\r\n    insertBefore(item, bItem) {\r\n        const { idField, pidField } = this.props;\r\n        const items = this.getAllItems();\r\n        const id = bItem[idField];\r\n        // const bItem = this.getItem(id);\r\n\r\n        //判断是否需要移动\r\n        const _idx = this.getItemIndex(id);\r\n        if (_idx !== 0) {\r\n            const prevItem = items[_idx - 1];\r\n            if (\r\n                prevItem[idField] === item[idField] &&\r\n                prevItem[pidField] === bItem[pidField]\r\n            ) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item[idField]);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        item[pidField] = bItem[pidField];\r\n\r\n        //插入操作\r\n        const idx = this.getItemIndex(id, items);\r\n        items.splice(idx, 0, item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    insertAfter(item, prevItem) {\r\n        const { idField, pidField } = this.props;\r\n        const items = this.getAllItems();\r\n        const id = prevItem[idField];\r\n        // const prevItem = this.getItem(id);\r\n\r\n        //判断是否需要移动\r\n        const _idx = this.getItemIndex(id);\r\n        if (_idx !== items.length - 1) {\r\n            const nextItem = items[_idx + 1];\r\n            if (\r\n                nextItem[idField] === item[idField] &&\r\n                nextItem[pidField] === prevItem[pidField]\r\n            ) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        //判断当前item是否已经存在, 如果存在则先删除\r\n        const oIdx = this.getItemIndex(item[idField]);\r\n        if (oIdx > -1) {\r\n            items.splice(oIdx, 1);\r\n        }\r\n\r\n        item[pidField] = prevItem[pidField];\r\n\r\n        //插入操作 之前有删除操作, 要重新查找index\r\n        const idx = findIndex(items, item => item[idField] === id);\r\n        items.splice(idx, 1, items[idx], item);\r\n\r\n        this.onChange(items);\r\n    }\r\n\r\n    clearTmpItems() {\r\n        const items = this.getAllItems();\r\n        const newItems = items\r\n            .map(item => {\r\n                if (item.__dragging__) {\r\n                    delete item.__dragging__;\r\n                }\r\n                return item;\r\n            })\r\n            .filter(item => !item.__tmp__);\r\n\r\n        this.onChange(newItems);\r\n    }\r\n\r\n    updateItemPid(item, pid = null) {\r\n        const { idField, pidField } = this.props;\r\n        const id = item[idField];\r\n        const idx = this.getItemIndex(id);\r\n\r\n        if (item[pidField] === pid) return true;\r\n\r\n        /**\r\n         * 局部环路检测\r\n         * 如: {id: A, pid: null}  {id: B, pid: A}\r\n         * 这是如果updateItemPid(A, B) 结果为:\r\n         * {id: A, pid: B}  {id: B, pid: A}\r\n         *\r\n         */\r\n        const pids = pid == null ? [] : this.getPids(pid);\r\n        if (pids.length) {\r\n            if (pids.indexOf(id) !== -1) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // 同级节点转变为子节点时顺序处理\r\n        if (pid) {\r\n            const pidIndex = this.getItemIndex(pid);\r\n            const childs = this.getChildren(pid);\r\n\r\n            if (childs.length) {\r\n                const firstItem = childs[0];\r\n                const lastItem = childs[childs.length - 1];\r\n\r\n                if (idx > pidIndex) {\r\n                    this.insertAfter(item, lastItem);\r\n                } else {\r\n                    this.insertBefore(item, firstItem);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (idx !== -1) {\r\n            item[pidField] = pid;\r\n        }\r\n\r\n        this.onChange(this.getAllItems());\r\n\r\n        return true;\r\n    }\r\n\r\n    commitItem(item) {\r\n        const { idField } = this.props;\r\n        const items = this.getAllItems();\r\n        const id = item[idField];\r\n        const idx = this.getItemIndex(id);\r\n\r\n        if (idx !== -1 && item.__tmp__) {\r\n            item.__tmp__ = false;\r\n            delete item.__tmp__;\r\n            items[idx] = item;\r\n\r\n            this.onChange(items);\r\n        }\r\n    }\r\n\r\n    isTmpItem(item) {\r\n        return !!item.__tmp__;\r\n    }\r\n\r\n    isDragging(item) {\r\n        return !!item.__dragging__;\r\n    }\r\n\r\n    getModel() {\r\n        return {\r\n            DropContainerContext: this.DropContainerContext,\r\n            isSameItem: this.isSameItem.bind(this),\r\n            getScope: this.getScope.bind(this),\r\n            fireEvent: this.fireEvent.bind(this),\r\n            addItem: this.addItem.bind(this),\r\n            addTmpItem: this.addTmpItem.bind(this),\r\n            getPids: this.getPids.bind(this),\r\n            updateItem: this.updateItem.bind(this),\r\n            getItems: this.getItems.bind(this),\r\n            getAllItems: this.getAllItems.bind(this),\r\n            removeItem: this.removeItem.bind(this),\r\n            getItemIndex: this.getItemIndex.bind(this),\r\n            getItem: this.getItem.bind(this),\r\n            insertBefore: this.insertBefore.bind(this),\r\n            insertAfter: this.insertAfter.bind(this),\r\n            clearTmpItems: this.clearTmpItems.bind(this),\r\n            commitItem: this.commitItem.bind(this),\r\n            isTmpItem: this.isTmpItem.bind(this),\r\n            updateItemPid: this.updateItemPid.bind(this),\r\n            setItemDragging: this.setItemDragging.bind(this),\r\n            isDragging: this.isDragging.bind(this)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n\r\n        return (\r\n            <ModelContext.Provider value={this.getModel()}>\r\n                {children}\r\n            </ModelContext.Provider>\r\n        );\r\n    }\r\n}\r\n","import DropContainer from \"./DropContainer\";\r\nimport DropItem from \"./DropItem\";\r\n\r\nexport { DropContainer, DropItem };\r\n","import React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport propTypes from \"prop-types\";\r\nimport withHooks from \"with-component-hooks\";\r\nimport invariant from \"invariant\";\r\nimport { ACTION_ADD, ACTION_SORT } from \"../constants\";\r\nimport ModelContext from \"../ModelContext\";\r\n\r\nclass DropContainer extends React.Component {\r\n    static propTypes = {\r\n        pid: propTypes.any,\r\n        disabled: propTypes.bool,\r\n        collect: propTypes.func,\r\n        canDrop: propTypes.func,\r\n        hover: propTypes.func,\r\n        drop: propTypes.func\r\n    };\r\n\r\n    static defaultProps = {\r\n        pid: null\r\n    };\r\n\r\n    _connectDropTarget = null;\r\n\r\n    connectDrop() {\r\n        const { disabled } = this.props;\r\n\r\n        const dom = findDOMNode(this);\r\n        if (this._connectDropTarget) {\r\n            this._connectDropTarget(disabled ? null : dom);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.connectDrop();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.connectDrop();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            pid = null,\r\n            canDrop,\r\n            hover,\r\n            drop,\r\n            collect,\r\n            children\r\n        } = this.props;\r\n\r\n        const designer = React.useContext(ModelContext);\r\n        const DropContainerContext = designer.DropContainerContext;\r\n        const { isRootContainer } = React.useContext(DropContainerContext);\r\n\r\n        invariant(\r\n            isRootContainer ? true : pid != null,\r\n            \"sub DropContainer props.pid miss.\"\r\n        );\r\n\r\n        const [collectedProps, connectDropTarget] = useDrop({\r\n            accept: designer.getScope(),\r\n\r\n            canDrop({ item }, monitor) {\r\n                if (canDrop) {\r\n                    return canDrop(item, monitor);\r\n                }\r\n\r\n                return true;\r\n            },\r\n\r\n            hover({ item }, monitor) {\r\n                if (hover) {\r\n                    hover(item, monitor);\r\n                }\r\n\r\n                designer.fireEvent(\"onDragHoverContainer\", {\r\n                    target: pid,\r\n                    monitor,\r\n                    item\r\n                });\r\n\r\n                const isOver = monitor.isOver({ shallow: true });\r\n                if (!isOver) return;\r\n\r\n                if (!monitor.canDrop()) {\r\n                    return;\r\n                }\r\n\r\n                designer.updateItemPid(item, pid);\r\n            },\r\n\r\n            drop({ item }, monitor) {\r\n                if (drop) {\r\n                    drop(item, monitor);\r\n                }\r\n\r\n                //根节点统一commit\r\n                if (isRootContainer) {\r\n                    const isTmpItem = designer.isTmpItem(item);\r\n                    designer.commitItem(item);\r\n\r\n                    designer.fireEvent(\"onDrop\", {\r\n                        target: item,\r\n                        action: isTmpItem ? ACTION_ADD : ACTION_SORT\r\n                    });\r\n                }\r\n            },\r\n\r\n            collect: monitor => {\r\n                const ext = collect ? collect(monitor) : {};\r\n\r\n                return {\r\n                    monitor,\r\n                    canDrop: monitor.canDrop(),\r\n                    isOver: monitor.isOver(),\r\n                    isStrictlyOver: monitor.isOver({ shallow: true }),\r\n                    ...ext\r\n                };\r\n            }\r\n        });\r\n\r\n        let items = designer.getItems(pid);\r\n        if (!collectedProps.isOver) {\r\n            items = items.filter(item => !designer.isTmpItem(item));\r\n        }\r\n\r\n        this._connectDropTarget = connectDropTarget;\r\n\r\n        const child =\r\n            typeof children === \"function\"\r\n                ? children(items, collectedProps)\r\n                : children;\r\n\r\n        React.Children.only(child);\r\n\r\n        return (\r\n            <DropContainerContext.Provider\r\n                value={{\r\n                    isRootContainer: false,\r\n                    canDrop: canDrop\r\n                }}>\r\n                {child}\r\n            </DropContainerContext.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withHooks(DropContainer);\r\n","import React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport propTypes from \"prop-types\";\r\nimport withHooks from \"with-component-hooks\";\r\nimport { useDrop, useDrag } from \"react-dnd\";\r\nimport { ACTION_ADD, ACTION_SORT } from \"../constants\";\r\nimport ModelContext from \"../ModelContext\";\r\n\r\nclass DropItem extends React.Component {\r\n    static propTypes = {\r\n        item: propTypes.object.isRequired,\r\n        disableDrag: propTypes.bool,\r\n        disableDrop: propTypes.bool,\r\n        canDrag: propTypes.func,\r\n        beginDrag: propTypes.func,\r\n        endDrag: propTypes.func\r\n    };\r\n\r\n    getDropOptions() {\r\n        const self = this;\r\n        const { item } = this.props;\r\n        const designer = React.useContext(ModelContext);\r\n        const DropContainerContext = designer.DropContainerContext;\r\n        const { canDrop } = React.useContext(DropContainerContext);\r\n\r\n        return {\r\n            accept: designer.getScope(),\r\n            canDrop({ item: dragItem }, monitor) {\r\n                return designer.isTmpItem(item)\r\n                    ? false\r\n                    : !designer.isSameItem(item, dragItem);\r\n            },\r\n\r\n            hover({ item: dragItem }, monitor) {\r\n                designer.fireEvent(\"onDragHoverItem\", {\r\n                    target: item,\r\n                    monitor,\r\n                    item: dragItem\r\n                });\r\n\r\n                const isOver = monitor.isOver({ shallow: true });\r\n                if (!isOver) return;\r\n\r\n                const canDropRet = canDrop ? canDrop(dragItem, monitor) : true;\r\n\r\n                if (!monitor.canDrop() || !canDropRet) {\r\n                    return;\r\n                }\r\n\r\n                const dragOffset = monitor.getClientOffset();\r\n                const previewDOM = findDOMNode(self);\r\n\r\n                //顺序调整\r\n                const targetOffset = previewDOM.getBoundingClientRect();\r\n                const middleY = ~~(\r\n                    targetOffset.bottom -\r\n                    targetOffset.height / 2\r\n                );\r\n\r\n                if (dragOffset.y <= middleY) {\r\n                    designer.insertBefore(dragItem, item);\r\n                } else {\r\n                    designer.insertAfter(dragItem, item);\r\n                }\r\n            },\r\n\r\n            collect(monitor) {\r\n                return {\r\n                    monitor,\r\n                    isOver: monitor.isOver(),\r\n                    isStrictlyOver: monitor.isOver({ shallow: true }),\r\n                    canDrop: designer.isTmpItem(item)\r\n                        ? false\r\n                        : monitor.canDrop()\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    getDragOptions() {\r\n        const { item, canDrag, beginDrag, endDrag } = this.props;\r\n        const designer = React.useContext(ModelContext);\r\n\r\n        return {\r\n            item: {\r\n                type: designer.getScope()\r\n            },\r\n\r\n            canDrag(monitor) {\r\n                if (canDrag) {\r\n                    return canDrag(monitor);\r\n                }\r\n                return true;\r\n            },\r\n\r\n            begin(monitor) {\r\n                if (beginDrag) {\r\n                    beginDrag(item, monitor);\r\n                }\r\n\r\n                designer.setItemDragging(item);\r\n\r\n                designer.fireEvent(\"onDragStart\", {\r\n                    target: item,\r\n                    action: ACTION_SORT\r\n                });\r\n\r\n                return {\r\n                    item\r\n                };\r\n            },\r\n\r\n            end(item, monitor) {\r\n                if (endDrag) {\r\n                    endDrag(item, monitor);\r\n                }\r\n\r\n                designer.clearTmpItems();\r\n\r\n                designer.fireEvent(\"onDragEnd\", {\r\n                    target: item,\r\n                    action: ACTION_SORT\r\n                });\r\n            }\r\n\r\n            // collect(monitor) {\r\n            //     return {\r\n            //         // monitor,\r\n            //         // isDragging: monitor.isDragging()\r\n            //     };\r\n            // }\r\n        };\r\n    }\r\n\r\n    _connectDropTarget = null;\r\n    _connectDragTarget = null;\r\n\r\n    connectDropAndDrag() {\r\n        const { disableDrag, disableDrop } = this.props;\r\n\r\n        const dom = findDOMNode(this);\r\n        if (this._connectDropTarget) {\r\n            this._connectDropTarget(disableDrop ? null : dom);\r\n        }\r\n        if (this._connectDragTarget) {\r\n            this._connectDragTarget(disableDrag ? null : dom);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.connectDropAndDrag();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.connectDropAndDrag();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this._connectDropTarget) {\r\n            this._connectDropTarget(null);\r\n        }\r\n        if (this._connectDragTarget) {\r\n            this._connectDragTarget(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { children, item } = this.props;\r\n        const designer = React.useContext(ModelContext);\r\n\r\n        const [collectedDropProps, connectDropTarget] = useDrop(\r\n            this.getDropOptions()\r\n        );\r\n\r\n        const [collectedDragProps, connectDragTarget] = useDrag(\r\n            this.getDragOptions()\r\n        );\r\n\r\n        this._connectDropTarget = connectDropTarget;\r\n        this._connectDragTarget = connectDragTarget;\r\n\r\n        const child =\r\n            typeof children === \"function\"\r\n                ? children({\r\n                      ...collectedDropProps,\r\n                      ...collectedDragProps,\r\n                      isTmp: designer.isTmpItem(item),\r\n                      isDragging: designer.isDragging(item)\r\n                  })\r\n                : children;\r\n\r\n        React.Children.only(child);\r\n\r\n        return child;\r\n    }\r\n}\r\n\r\nexport default withHooks(DropItem);\r\n","import React from \"react\";\r\nimport propTypes from \"prop-types\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport withHooks from \"with-component-hooks\";\r\nimport ModelContext from \"../ModelContext\";\r\nimport { ACTION_ADD, ACTION_SORT } from \"../constants\";\r\n\r\nclass WidgetItem extends React.Component {\r\n    static propTypes = {\r\n        getInstance: propTypes.func.isRequired,\r\n        disabled: propTypes.bool,\r\n        canDrag: propTypes.func,\r\n        beginDrag: propTypes.func,\r\n        endDrag: propTypes.func\r\n    };\r\n\r\n    _connectDragSource = null;\r\n\r\n    connectDrag() {\r\n        const { disabled } = this.props;\r\n\r\n        const dom = findDOMNode(this);\r\n        if (this._connectDragSource) {\r\n            this._connectDragSource(disabled ? null : dom);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.connectDrag();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.connectDrag();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            children,\r\n            getInstance,\r\n            canDrag,\r\n            beginDrag,\r\n            endDrag\r\n        } = this.props;\r\n\r\n        const designer = React.useContext(ModelContext);\r\n\r\n        const [collectProps, connectDragSource] = useDrag({\r\n            item: {\r\n                type: designer.getScope()\r\n            },\r\n\r\n            canDrag(monitor) {\r\n                if (canDrag) {\r\n                    return canDrag(monitor);\r\n                }\r\n                return true;\r\n            },\r\n\r\n            begin(monitor) {\r\n                const item = getInstance();\r\n\r\n                if (beginDrag) {\r\n                    beginDrag(item, monitor);\r\n                }\r\n\r\n                designer.addTmpItem(item);\r\n\r\n                designer.fireEvent(\"onDragStart\", {\r\n                    target: item,\r\n                    action: ACTION_ADD\r\n                });\r\n\r\n                return {\r\n                    item: item\r\n                };\r\n            },\r\n\r\n            end(item, monitor) {\r\n                if (endDrag) {\r\n                    endDrag(item, monitor);\r\n                }\r\n\r\n                designer.clearTmpItems();\r\n\r\n                designer.fireEvent(\"onDragEnd\", {\r\n                    target: item,\r\n                    action: ACTION_ADD\r\n                });\r\n            },\r\n\r\n            collect(monitor) {\r\n                return {\r\n                    monitor,\r\n                    isDragging: monitor.isDragging()\r\n                };\r\n            }\r\n        });\r\n\r\n        this._connectDragSource = connectDragSource;\r\n\r\n        const child =\r\n            typeof children === \"function\" ? children(collectProps) : children;\r\n\r\n        React.Children.only(child);\r\n\r\n        return child;\r\n    }\r\n}\r\n\r\nexport default withHooks(WidgetItem);\r\n","import React from \"react\";\r\nimport { DropContainer, DropItem } from \"../src\";\r\n\r\nexport default function DropContainerDemo({ pid = null, title, canDrop }) {\r\n    return (\r\n        <DropContainer pid={pid} canDrop={canDrop}>\r\n            {(items, { monitor, canDrop }) => {\r\n                return (\r\n                    <div\r\n                        style={{\r\n                            border: canDrop\r\n                                ? \"1px solid green\"\r\n                                : \"1px solid #ccc\",\r\n                            flex: 1\r\n                        }}>\r\n                        <h3>{title}</h3>\r\n                        <hr />\r\n                        {items.map(item => {\r\n                            return (\r\n                                <DropItem key={item.id} item={item}>\r\n                                    {({\r\n                                        isDragging,\r\n                                        isHover,\r\n                                        isOver,\r\n                                        isTmp\r\n                                    }) => {\r\n                                        return (\r\n                                            <div\r\n                                                style={{\r\n                                                    opacity: isDragging\r\n                                                        ? 0.5\r\n                                                        : 1,\r\n                                                    padding: 10,\r\n                                                    margin: 5,\r\n                                                    background: \"#f2f2f2\",\r\n                                                    border: \"1px solid #dadada\"\r\n                                                }}>\r\n                                                {item.title}({item.id})\r\n                                            </div>\r\n                                        );\r\n                                    }}\r\n                                </DropItem>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                );\r\n            }}\r\n        </DropContainer>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { DropContainer, DropItem } from \"../src\";\r\nexport default function DropContainerWithChildDemo({ title, canDrop }) {\r\n    return (\r\n        <DropContainer pid=\"parent\" canDrop={canDrop}>\r\n            {(items, { monitor, canDrop }) => {\r\n                return (\r\n                    <div\r\n                        style={{\r\n                            border: canDrop\r\n                                ? \"1px solid green\"\r\n                                : \"1px solid #ccc\",\r\n                            flex: 1\r\n                        }}>\r\n                        <h3>{title}</h3>\r\n                        <hr />\r\n                        {items.map(item => {\r\n                            return (\r\n                                <DropItem key={item.id} item={item}>\r\n                                    {({\r\n                                        isDragging,\r\n                                        isHover,\r\n                                        isOver,\r\n                                        isTmp\r\n                                    }) => {\r\n                                        return (\r\n                                            <div\r\n                                                style={{\r\n                                                    opacity: isDragging\r\n                                                        ? 0.5\r\n                                                        : 1,\r\n                                                    padding: 10,\r\n                                                    margin: 5,\r\n                                                    background: \"#f2f2f2\",\r\n                                                    border: \"1px solid #dadada\"\r\n                                                }}>\r\n                                                {item.title}({item.id})\r\n                                            </div>\r\n                                        );\r\n                                    }}\r\n                                </DropItem>\r\n                            );\r\n                        })}\r\n\r\n                        <DropContainer pid=\"child\">\r\n                            {(items, { monitor, canDrop }) => {\r\n                                return (\r\n                                    <div\r\n                                        style={{\r\n                                            height: 300,\r\n                                            overflow: \"auto\",\r\n                                            border: canDrop\r\n                                                ? \"1px solid green\"\r\n                                                : \"1px solid #ccc\",\r\n                                            flex: 1\r\n                                        }}>\r\n                                        <h3>child</h3>\r\n                                        <hr />\r\n                                        {items.map(item => {\r\n                                            return (\r\n                                                <DropItem\r\n                                                    key={item.id}\r\n                                                    item={item}>\r\n                                                    {({\r\n                                                        isDragging,\r\n                                                        isHover,\r\n                                                        isOver,\r\n                                                        isTmp\r\n                                                    }) => {\r\n                                                        return (\r\n                                                            <div\r\n                                                                style={{\r\n                                                                    opacity: isDragging\r\n                                                                        ? 0.5\r\n                                                                        : 1,\r\n                                                                    padding: 10,\r\n                                                                    margin: 5,\r\n                                                                    background:\r\n                                                                        \"#f2f2f2\",\r\n                                                                    border:\r\n                                                                        \"1px solid #dadada\"\r\n                                                                }}>\r\n                                                                {item.title}(\r\n                                                                {item.id})\r\n                                                            </div>\r\n                                                        );\r\n                                                    }}\r\n                                                </DropItem>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                );\r\n                            }}\r\n                        </DropContainer>\r\n                    </div>\r\n                );\r\n            }}\r\n        </DropContainer>\r\n    );\r\n}\r\n","import TextField from \"./TextField\";\r\nimport TextareaField from \"./TextareaField\";\r\nimport SelectField from \"./SelectField\";\r\nimport CheckboxField from \"./CheckboxField\";\r\nimport RadioField from \"./RadioField\";\r\n\r\nexport default [\r\n    TextField,\r\n    TextareaField,\r\n    SelectField,\r\n    CheckboxField,\r\n    RadioField\r\n];\r\n","export default {\r\n    xtype: \"EX_TEXT_FIELD\",\r\n    title: \"文本\"\r\n};\r\n","export default {\r\n    xtype: \"EX_TEXTAREA_FIELD\",\r\n    title: \"多行文本\"\r\n};\r\n","export default {\r\n    xtype: \"EX_SELECT_FIELD\",\r\n    title: \"单选列表\"\r\n};\r\n","export default {\r\n    xtype: \"EX_CHECKBOX_FIELD\",\r\n    title: \"复选框\"\r\n};\r\n","export default {\r\n    xtype: \"EX_RADIO_FIELD\",\r\n    title: \"单选框\"\r\n};\r\n","import WebDesignDndProvider from \"./WebDesignDndProvider\";\r\nimport { DropContainer, DropItem } from \"./DropContainer\";\r\nimport WidgetItem from \"./WidgetItem\";\r\n\r\nexport { WebDesignDndProvider, WidgetItem, DropContainer, DropItem };\r\n","import React from 'react';\r\n\r\nexport default React.createContext({});","const ACTION_ADD = \"ADD\";\r\nconst ACTION_SORT = \"SORT\";\r\n\r\nexport { ACTION_ADD, ACTION_SORT };\r\n"],"sourceRoot":""}